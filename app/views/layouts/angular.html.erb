<!DOCTYPE html>
<html ng-app="recipeApp">
<head>
    <title>Recipe</title>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-route.min.js"></script>	
    <%= javascript_include_tag 'angular', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>
</head>

<body>
  <nav>
    <h1>Your Recipes Below</h1>
       <!-- Logout Button -->
      <form action="<%= session_path %>" method="POST">           
        <input type="hidden" name="authenticity_token"
              value="<%= form_authenticity_token %>">
        <input type="hidden" name="_method" value="DELETE">
        <input class="logout" type="submit" value="Log out">
      </form> 
      
      <br/ >

    <div ng-controller="UserController as userCtrl">
	     <h3>User is: {{userCtrl.current_user.email}}</h3>
    </div>

  </nav>
	
  <div ng-controller="PostController as postCtrl">

		<form ng-submit="postCtrl.createPost()">
			<input  type="text" 
              ng-model="postCtrl.recipe_name" 
              placeholder="Name of Recipe" />{{postCtrl.recipe_name}}
      <br/>
      <input  type="text" 
              ng-model="postCtrl.ingredients" 
              placeholder="Add your ingredients list" />{{postCtrl.ingredients}}
      <br/>
			<input  type="textarea" 
              ng-model="postCtrl.body" 
              placeholder="Write your recipe down" /> {{postCtrl.body}}
      <br/>
		  <input type="submit">
		</form>
    
    <hr />

    <h3>Current Recipes</h3>

		<div class="recipe-display" ng-repeat="post in postCtrl.current_user_posts">

      <p>Recipe Name: {{post.recipe_name}}</p>
			<p>Ingredients: {{post.ingredients}}</p>
      <p>Instructions: {{post.body}}</p>
      <button ng-click="postCtrl.updatePost(post)"> Edit</button>
      <button ng-click="postCtrl.deletePost(post)"> Edit</button>

		</div>

	</div>

<!-- 
<form ng-submit="articleCtrl.deleteArticle(article)">
 -->
<!--   
 
    <li ng-repeat="todo in ctrl.todos">

      <button ng-click="ctrl.destroyTodo(todo)">
        Remove todo!
      </button>
      <span ng-class="todo.done ? 'done' : 'undone'">
        {{ todo.description }}
      </span>
 -->
</body>
</html>
